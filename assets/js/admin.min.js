window.Project=function(t,e,i,a){"use strict";var n={init:function(){i(e).on("click","#enable_serial_number",n.enable_serial_number),i(e).on("click",".woocommerce_options_panel .add-serial-number-manually",n.add_tab_serial_number),i(e).on("click",".woocommerce_options_panel .add-serial-title",n.tab_add_serial_number_toggle),i(".ever-serial_numbers_tab").on("click",n.load_tab_data),i(e).on("click","#image_license_upload",n.upload_license_upload),i(e).on("click","#image_license_remove",n.remove_license_upload),i(e).on("change","#product",n.load_variations),i(e).on("change",".ever-panel .validity_type",n.change_validity_type),i(e).on("click",".wsn_generate_btn",n.generate_numbers),i(".ever-select").select2(),i(".ever-date, .ever-panel #validity[type=text]").datepicker()},add_tab_serial_number:function(e){e.preventDefault(),wp.ajax.send("add_serial_number",{data:{product:i("#post_ID").val(),serial_number:i(".ever-panel #serial_number").val(),image_license:i(".ever-panel #image_license").val(),deliver_times:i(".ever-panel #deliver_times").val(),max_instance:i(".ever-panel #max_instance").val(),expires_on:i(".ever-panel #expires_on").val(),validity:i(".ever-panel #validity").val()},success:function(e){e.html?i(".ever-content-placeholder").html(e.html):e.empty_serial&&i(".wsn-message").html(e.empty_serial)},error:function(e){console.log(e)}})},enable_serial_number:function(){i(".wsn-serial-number-tab").addClass("ever-spinner");var e="",a="";i(this).is(":checked")?(e="enable",a=wpwsn.i18n.serial_number_activated):(e="disable",a=wpwsn.i18n.serial_number_deactivated),i(".ever-content-placeholder").html('<div class="notice notice-success is-dismissible"><p><strong>'+a+"</strong></p></div>"),wp.ajax.send("enable_serial_number",{data:{enable_serial_number:e,post_id:i("#post_ID").val()},success:function(e){i(".wsn-serial-number-tab").removeClass("ever-spinner"),e.html&&i(".ever-content-placeholder").html(e.html)}})},load_tab_data:function(){i(".wsn-serial-number-tab").addClass("ever-spinner"),wp.ajax.send("load_tab_data",{data:{post_id:i("#post_ID").val()},success:function(e){i(".wsn-serial-number-tab").removeClass("ever-spinner"),console.log(e),e.html&&i(".ever-content-placeholder").html(e.html)},error:function(e){console.log(e)}})},tab_add_serial_number_toggle:function(e){e.preventDefault(),i(".ever-panel").toggle(),i(".ever-select").select2(),i(".ever-date").datepicker()},upload_license_upload:function(e){e.preventDefault();var a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(){var e=a.state().get("selection").first().toJSON().url;i(".image_license_prev").attr("src",e),i('input[name="image_license"]').val(e),i("#image_license_remove").removeClass("hidden")})},remove_license_upload:function(e){e.preventDefault(),i(".image_license_prev").attr("src",""),i('input[name="image_license"]').val(""),i(this).addClass("hidden")},load_variations:function(e){e.preventDefault(),i(".ever-spinner-product").css("visibility","visible"),wp.ajax.send("load_variations",{data:{post_id:i(this).val()},success:function(e){console.log(e),i("#variation").html(e.html),i(".ever-spinner-product").css("visibility","hidden")},error:function(e){console.log(e)}})},change_validity_type:function(){var e=i(this).val(),a=i(".ever-panel #validity");"days"===e?(a.attr("type","number"),a.datepicker("destroy")):"date"===e&&(a.attr("type","text"),a.datepicker({dateFormat:"dd-mm-yy"}))},generate_numbers:function(e){e.preventDefault();var a=i(this).prev().val(),n=i(this).data("rule_id");t.confirm(wpwsn.i18n.generate_confirm+a+" numbers?")&&wp.ajax.send("wsn_generate_numbers",{data:{limit:a,rule_id:n},success:function(e){e.response&&t.alert(a+wpwsn.i18n.generate_success)},error:function(e){console.log(e)}})}};return i(e).ready(n.init),n}(window,document,jQuery);