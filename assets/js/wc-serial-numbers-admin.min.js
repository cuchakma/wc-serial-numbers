!function(c,t){"use strict";c.wc_serial_numbers_admin=function(){var e=this;e.init=function(){e.init_select2(".wc-serial-numbers-select-product","wc_serial_numbers_search_products",wc_serial_numbers_admin_i10n.i18n.search_product),e.init_datepicker(".wc-serial-numbers-select-date"),e.encrypt_decrypt()},e.init_select2=function(e,n,i){i=i||"Select..",c(e).select2({ajax:{cache:!0,delay:500,url:t.wc_serial_numbers_admin_i10n.ajaxurl,method:"POST",dataType:"json",data:function(e){return{action:n,nonce:t.wc_serial_numbers_admin_i10n.nonce,search:e.term,page:e.page}},processResults:function(e,n){return n.page=n.page||1,{results:e.results,pagination:{more:e.pagination.more}}}},placeholder:i,minimumInputLength:1,allowClear:!0})},e.init_datepicker=function(e){c(e).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",firstDay:7,minDate:new Date})},e.encrypt_decrypt=function(){c(document).on("click",".wc-serial-numbers-decrypt-key",function(e){e.preventDefault();var n=c(this),i=n.data("serial-id"),t=n.data("nonce")||null,a=n.closest("td"),r=a.find(".serial-key"),s=a.find(".serial-spinner");return s.show(),r.hasClass("encrypted")?wp.ajax.send("wc_serial_numbers_decrypt_key",{data:{serial_id:i,nonce:t},success:function(e){r.text(e.key),s.hide(),r.removeClass("encrypted"),n.text(wc_serial_numbers_admin_i10n.i18n.hide)},error:function(){s.hide(),r.text(""),r.addClass("encrypted"),n.text(wc_serial_numbers_admin_i10n.i18n.show),alert("Decrypting key failed")}}):(r.addClass("encrypted"),s.hide(),r.text(""),n.text(wc_serial_numbers_admin_i10n.i18n.show)),!1})},e.init()},c.fn.wc_serial_numbers_admin=function(){return new c.wc_serial_numbers_admin},c.wc_serial_numbers_admin()}(jQuery,window);